<!DOCTYPE html>
<html>
<head>
  <title>Kenya Presidential Tally</title>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  
  <link rel="stylesheet" media="all" href="jquery-jvectormap.css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="jquery-jvectormap.js"></script>
  <script src="lib/jquery-mousewheel.js"></script>

  <script src="src/jvectormap.js"></script>

  <script src="src/abstract-element.js"></script>
  <script src="src/abstract-canvas-element.js"></script>
  <script src="src/abstract-shape-element.js"></script>
  <script src="src/svg-element.js"></script>
  <script src="src/svg-group-element.js"></script>
  <script src="src/svg-canvas-element.js"></script>
  <script src="src/svg-shape-element.js"></script>
  <script src="src/svg-path-element.js"></script>
  <script src="src/svg-circle-element.js"></script>
  <script src="src/svg-image-element.js"></script>
  <script src="src/svg-text-element.js"></script>

  <script src="src/vml-element.js"></script>
  <script src="src/vml-group-element.js"></script>
  <script src="src/vml-canvas-element.js"></script>
  <script src="src/vml-shape-element.js"></script>
  <script src="src/vml-path-element.js"></script>
  <script src="src/vml-circle-element.js"></script>
  <script src="src/vml-image-element.js"></script>

  <script src="src/map-object.js"></script>
  <script src="src/region.js"></script>
  <script src="src/marker.js"></script>

  <script src="src/vector-canvas.js"></script>
  <script src="src/simple-scale.js"></script>
  <script src="src/ordinal-scale.js"></script>
  <script src="src/numeric-scale.js"></script>
  <script src="src/color-scale.js"></script>
  <script src="src/legend.js"></script>
  <script src="src/data-series.js"></script>
  <script src="src/proj.js"></script>
  <script src="src/map.js"></script>

  <script src="tests/KenyaCounty.js"></script>
  <script src="tests/Kiambu.js"></script>
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
  <style>
  .progress {height: 3px;width: 70%;}
  .table {font-size: 12px;}
  
  .jvectormap-container {
    height:100%;
    width:100%;
	}


  </style>
  
<script>

var $j = jQuery.noConflict();
$j(document).ready(function() {

	$j("#myModal").on('hidden.bs.modal', function () {
	$j('#map1').vectorMap('set', 'focus', {scale: 2.1, x: 0, y: 0, animate: true});
	
     });
	 
	 
    $j("#myModal").on('show.bs.modal', function () {     
			
	$j(this)    
    .find('.modal-body')
    .html('Nasa: ' +  cdata1[currentCode.split('id')[1]]  + ' <br /> Jubilee: ' + cdata2[currentCode.split('id')[1]] + ' <br /> Registered Voters: ' + cdata3[currentCode.split('id')[1]] );
	
	$j(this)
    .find('.modal-title')
    .html('County: ' +   cdata4[currentCode.split('id')[1]] + ' - ' + currentCode.split('id')[1]);
	
     });
	 
	LoadFunction() ;


});
</script>


<script>
	var cdata = {} ;
	var cdata1 = [] ;
	var cdata2  = [] ;
	var cdata3 = [] ;
	var cdata4 = [] ;
	//var mycdata = {'id0' : '1', 'id1' : '0'} ;
	
	function myFunction(a) {
	var $j = jQuery.noConflict();
	$j('#myModal').modal('show');
	}

	function LoadFunction() {
	
	var xhttp  = new XMLHttpRequest();
	
	xhttp.onreadystatechange = function(){	
    if (this.readyState == 4 && this.status == 200) 
	{
        XMLoad(this);
    }
	};
	
	xhttp.open("GET", "Results.xml", true);
	xhttp.send();
    }

	function XMLoad(xml) {
    var xmlDoc = xml.responseXML;
    var x =  xmlDoc.getElementsByTagName('Nasa');
	var x1 =  xmlDoc.getElementsByTagName('Jubilee');
	var x2 =  xmlDoc.getElementsByTagName('Total');
	var x3 =  xmlDoc.getElementsByTagName('Name');
	var my_x;
	var my_y;
	var passvalue ;
	
    for(var i = 0 ; i < x.length ; i++)
    {
	
	my_x = x[i].firstChild.nodeValue ;
	my_y = x1[i].firstChild.nodeValue ;
	
	if(my_x > my_y)
	{
	passvalue = 'id' + i ;
	cdata[passvalue] = '1' ;
	passvalue = '';
	}
	else
	{
	passvalue = 'id' + i  ;
	cdata[passvalue] = '0' ;
	passvalue = '';
	}
	cdata1.push(x[i].firstChild.nodeValue) ;
	cdata2.push(x1[i].firstChild.nodeValue)  ;
	cdata3.push(x2[i].firstChild.nodeValue)  ;
	cdata4.push(x3[i].firstChild.nodeValue)  ;
    }    
	LoadMap() ;	
	}
</script>

<script>
function myFunction() {
var $j = jQuery.noConflict();
 $j('#myModal').modal('show');


}

</script>
<script>
var currentCode;
function LoadMap() {
jQuery.noConflict();
 var $ = jQuery;
	  
      $('#map1').vectorMap({
        map: 'KenyaCounty',
		
		zoomButtons : false,
        panOnDrag: true,
   
        series: {
          regions: [{
		  scale: {
            '0': '#FF69B4',
            '1': '#4169E1'
          },
              values: cdata
          }]
        },
		regionStyle: {
			initial: {
			
			stroke: "black",
			"stroke-width": 0.3,
			"stroke-opacity": 1,
			}
		},
		
		regionLabelStyle: {
		initial: {
        fill: '#B90E32'
		},
		hover: {
        fill: 'black'
		}
		},
	
		labels: {
		regions: {
        render: function(code){         

            return code.split('id')[1];
          
        }}},
	
		onRegionClick: function (event, code) {
		  
		  if(currentCode == code)
		  {
		   $('#map1').vectorMap('set', 'focus', {scale: 2.1, x: 0, y: 0, animate: true});
		   currentCode = '' ;
		  }
		  else
		  {
		  $('#map1').vectorMap('set', 'focus', {region: code, animate: true });
		  currentCode = code ;
		  myFunction();		  
		  }		  
        },	 		
      });


}

</script>
</head>
<body>
<div class="container">
<div class="row">
<div class="col-sm-2 col-md-2 hidden-xs">
</div>
<div class="col-sm-8 col-md-8 col-xs-12" align="center">
<h3>Kenya Presidential Tally: 2017 </h3>
<h4>NASA || Jubilee </h4>
</div>

<div class="col-sm-2 col-md-2 hidden-xs">
</div>


</div>
</div>



<div class="container">
<div class="row">

<div class="col-sm-12 col-md-12 col-xs-12">

<div id="map1" style="width: 480px; height: 570px"></div>  


</div>
</div>
</div>


  <div class="container">
<div class="row">
<div class="col-sm-2 col-md-2 hidden-xs">
</div>
<div class="col-sm-8 col-md-8 col-xs-12" align="center">
<table class="table table-bordered">
    <thead>
      <tr>
        <th>County</th>
		<th>County</th>
		<th>County</th>
		<th>County</th>
		<th>County</th>
		<th>County</th>
		<th>County</th>
        <th>County</th>
      </tr>
    </thead>
    <tbody>
      <tr>
       <td>1 : Mombasa</td>
<td>2 : Kwale</td>
<td>3 : Kilifi</td>
<td>4 : Tana River</td>
<td>5 : Lamu</td>
<td>6 : Taita Taveta</td>
<td>7 : Garissa</td>
<td>8 : Wajir</td>

      </tr>
	  <tr>
    <td>9 : Mandera</td>
<td>10 : Marsabit</td>
<td>11 : Isiolo</td>
<td>12 : Meru</td>
<td>13 : Tharak Nithi</td>
<td>14 : Embu</td>
<td>15 : Kitui</td>
<td>16 : Machakos</td>

      </tr>
	  <tr>
<td>17 : Makueni</td>
<td>18 : Nyandarua</td>
<td>19 : Nyeri</td>
<td>20 : Kirinyaga</td>
<td>21 : Muranga</td>
<td>22 : Kiambu</td>
<td>23 : Turkana</td>
<td>24 : West Pokot</td>

      </tr>
	  <tr>
<td>25 : Samburu</td>
<td>26 : Trans Nzoia</td>
<td>27 : Uasin Gishu</td>
<td>28 : Elgeyo Marakwet</td>
<td>29 : Nandi</td>
<td>30 : Baringo</td>
<td>31 : Laikipia</td>
<td>32 : Nakuru</td>

      </tr>
	  <tr>
<td>33 : Narok</td>
<td>34 : Kajiado</td>
<td>35 : Kericho</td>
<td>36 : Bomet</td>
<td>37 : Kakamega</td>
<td>38 : Vihiga</td>
<td>39 : Bungoma</td>
<td>40 : Busia</td>

      </tr>
	  <tr>
<td>41 : Siaya</td>
<td>42 : Kisumu</td>
<td>43 : Homa Bay</td>
<td>44 : Migori</td>
<td>45 : Kisii</td>
<td>46 : Nyamira</td>
<td>47 : Nairobi</td>

      </tr>
	 
    </tbody>
  </table>


</div>

<div class="col-sm-2 col-md-2 hidden-xs">
</div>


</div>
</div>




     
  <div class="modal fade" id="myModal" >
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"></h4>
      </div>
      <div class="modal-body">
	    <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:70%">
        900%
        </div>
        </div>
        <p>One fine body&hellip;</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>



</body>
</html>